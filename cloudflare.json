{
  "name": "Portfolio CDN Configuration",
  "description": "Cloudflare CDN configuration for Digital Ocean deployed portfolio",
  "cache_rules": [
    {
      "name": "Static Assets - Long Cache",
      "expression": "(http.request.uri.path matches \"\\.(css|js|png|jpg|jpeg|gif|webp|avif|svg|ico|woff|woff2|ttf|eot|otf)$\")",
      "action": "cache",
      "cache_settings": {
        "cache_level": "cache_everything",
        "edge_cache_ttl": 31536000,
        "browser_cache_ttl": 31536000,
        "respect_origin_cache_control": false
      }
    },
    {
      "name": "HTML Pages - Short Cache with Revalidation",
      "expression": "(http.request.uri.path matches \"\\.(html?)$\" or not http.request.uri.path contains \".\")",
      "action": "cache",
      "cache_settings": {
        "cache_level": "cache_everything",
        "edge_cache_ttl": 86400,
        "browser_cache_ttl": 300,
        "respect_origin_cache_control": true
      }
    },
    {
      "name": "API Routes - No Cache",
      "expression": "(http.request.uri.path matches \"^/api/.*\")",
      "action": "bypass_cache"
    }
  ],
  "page_rules": [
    {
      "targets": [
        {
          "target": "url",
          "constraint": {
            "operator": "matches",
            "value": "*.yoursite.com/*.(css|js|png|jpg|jpeg|gif|webp|avif|svg|ico|woff|woff2|ttf|eot|otf)"
          }
        }
      ],
      "actions": [
        {
          "id": "cache_level",
          "value": "cache_everything"
        },
        {
          "id": "edge_cache_ttl",
          "value": 31536000
        },
        {
          "id": "browser_cache_ttl",
          "value": 31536000
        }
      ],
      "priority": 1,
      "status": "active"
    },
    {
      "targets": [
        {
          "target": "url",
          "constraint": {
            "operator": "matches",
            "value": "*.yoursite.com/api/*"
          }
        }
      ],
      "actions": [
        {
          "id": "cache_level",
          "value": "bypass"
        }
      ],
      "priority": 2,
      "status": "active"
    }
  ],
  "security_settings": {
    "security_level": "medium",
    "challenge_passage": 86400,
    "browser_integrity_check": true,
    "hotlink_protection": false,
    "security_header": true,
    "origin_error_page_pass_thru": false,
    "sort_query_string_for_cache": true
  },
  "performance_settings": {
    "minify": {
      "css": true,
      "html": true,
      "js": true
    },
    "brotli": true,
    "polish": "lossless",
    "webp": true,
    "mirage": true,
    "rocket_loader": false,
    "auto_minify": true
  },
  "ssl_settings": {
    "ssl": "full",
    "tls_1_3": "on",
    "automatic_https_rewrites": true,
    "opportunistic_encryption": true,
    "always_use_https": true,
    "min_tls_version": "1.2"
  },
  "firewall_rules": [
    {
      "name": "Block suspicious bots",
      "expression": "(cf.bot_management.score lt 30 and not cf.bot_management.verified_bot)",
      "action": "challenge"
    },
    {
      "name": "Rate limit API endpoints",
      "expression": "(http.request.uri.path matches \"^/api/.*\")",
      "action": "rate_limit",
      "rate_limit": {
        "threshold": 30,
        "period": 60,
        "action": "challenge"
      }
    }
  ],
  "zone_settings": {
    "0rtt": "on",
    "advanced_ddos": "on",
    "always_online": "on",
    "automatic_https_rewrites": "on",
    "brotli": "on",
    "browser_cache_ttl": 14400,
    "browser_check": "on",
    "cache_level": "aggressive",
    "challenge_ttl": 1800,
    "development_mode": "off",
    "email_obfuscation": "on",
    "hotlink_protection": "off",
    "ip_geolocation": "on",
    "ipv6": "on",
    "minify": {
      "css": "on",
      "html": "on",
      "js": "on"
    },
    "mobile_redirect": "off",
    "opportunistic_encryption": "on",
    "polish": "lossless",
    "prefetch_preload": "off",
    "privacy_pass": "on",
    "response_buffering": "off",
    "rocket_loader": "off",
    "security_level": "medium",
    "server_side_exclude": "on",
    "sort_query_string_for_cache": "off",
    "ssl": "full",
    "tls_1_3": "on",
    "tls_client_auth": "off",
    "true_client_ip_header": "off",
    "waf": "on",
    "webp": "on"
  }
}