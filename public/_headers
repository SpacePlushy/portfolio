# CDN-Optimized Headers Configuration
# This file provides fallback headers for static file serving
# These headers work in conjunction with middleware.js for optimal CDN performance

# Default headers for all files (fallback)
/*
  X-Frame-Options: DENY
  X-Content-Type-Options: nosniff
  X-XSS-Protection: 1; mode=block
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: camera=(), microphone=(), geolocation=()

# Root and HTML pages - Short cache with revalidation for dynamic content
/
  Cache-Control: public, max-age=300, s-maxage=86400, stale-while-revalidate=3600
  Vary: Accept-Encoding, Accept-Language, Accept

/*.html
  Cache-Control: public, max-age=300, s-maxage=86400, stale-while-revalidate=3600
  Vary: Accept-Encoding, Accept-Language, Accept

# CSS files - Long cache with immutable flag
/*.css
  Cache-Control: public, max-age=31536000, s-maxage=31536000, immutable
  Vary: Accept-Encoding
  X-Content-Type-Options: nosniff

# JavaScript files - Long cache with immutable flag
/*.js
*.mjs
  Cache-Control: public, max-age=31536000, s-maxage=31536000, immutable
  Vary: Accept-Encoding
  X-Content-Type-Options: nosniff

# Font files - Very long cache with CORS support
/fonts/*
*.woff
*.woff2
*.ttf
*.eot
*.otf
  Cache-Control: public, max-age=31536000, s-maxage=31536000, immutable, crossorigin
  Access-Control-Allow-Origin: *
  Vary: Accept-Encoding

# Image files - Moderate cache with optimization hints
/images/*
*.png
*.jpg
*.jpeg
*.gif
*.webp
*.avif
*.svg
*.ico
  Cache-Control: public, max-age=86400, s-maxage=2592000, stale-while-revalidate=86400
  Vary: Accept, Accept-Encoding
  X-Content-Type-Options: nosniff

# SVG files (special handling for inline vs image context)
/*.svg
  Cache-Control: public, max-age=86400, s-maxage=2592000, stale-while-revalidate=86400
  Vary: Accept, Accept-Encoding
  X-Content-Type-Options: nosniff

# Manifest and service worker files - Short cache for updates
/manifest.json
/sw.js
/service-worker.js
  Cache-Control: public, max-age=300, must-revalidate

# API endpoints - No cache (handled by middleware)
/api/*
  Cache-Control: no-cache, no-store, must-revalidate, private
  Pragma: no-cache
  Expires: 0

# Health check endpoint - Minimal cache
/api/health
  Cache-Control: public, max-age=60

# Static assets in root - Long cache
*.map
  Cache-Control: public, max-age=31536000, s-maxage=31536000, immutable

# Sitemap and robots - Moderate cache
/sitemap.xml
/robots.txt
  Cache-Control: public, max-age=3600, s-maxage=86400